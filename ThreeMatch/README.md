# ToyParty

**ToyParty**는 Unity 2D로 제작된 헥사곤 격자 기반의 매치-3 퍼즐 게임입니다.

## 게임 개요

ToyParty는 6각형 타일 위에서 같은 색깔의 보석들을 매칭하여 제거하는 퍼즐 게임입니다. 클러스터 매칭과 라인 매칭을 통해 다양한 콤보를 만들 수 있으며, 특수 블록을 활용한 전략적인 플레이가 가능합니다.

## 주요 기능

### 게임 메커니즘
- **헥사곤 격자 시스템**: 6방향으로 연결된 헥사곤 타일 기반 퍼즐
- **클러스터 매칭**: 같은 색의 블록 3개 이상이 뭉쳐있을 때 제거
- **라인 매칭**: 같은 색의 블록이 일직선으로 3개 이상 연결될 때 제거
- **연쇄 반응**: 블록 제거 후 자동으로 빈 공간을 채우고 추가 매칭 체크

### 블록 타입
- **일반 보석(Gem)**: 6가지 색상 (빨강, 초록, 노랑, 주황, 보라, 파랑)
- **장애물(Obstacle)**: 2번 타격해야 제거되는 특수 블록 (제거 시 보너스 점수 200점)
- **특수 블록**:
  - **로켓(Rocket)**: 특수 효과를 가진 블록
  - **부메랑(Boomerang)**: 랜덤 위치로 이동하여 해당 블록을 제거
  - **TNT**: 폭발 효과

### 핵심 시스템
- **오브젝트 풀링**: 효율적인 메모리 관리를 위한 블록 재사용 시스템
- **스코어 시스템**: 블록 제거 시 점수 획득 (기본 30점 × 블록 개수)
- **이동 횟수 제한**: 제한된 이동 횟수 내에서 목표 달성
- **동적 난이도**: 장애물 비율 조절을 통한 난이도 설정 (기본 10%)

## 프로젝트 구조

```
ToyParty/
├── Assets/
│   ├── Scenes/
│   │   └── StageScene.unity          # 메인 게임 씬
│   ├── Scripts/
│   │   ├── Block.cs                  # 블록 기본 클래스
│   │   ├── Gem.cs                    # 일반 보석 블록
│   │   ├── Obstacle.cs               # 장애물 블록
│   │   ├── SpecialBlock.cs           # 특수 블록 기본 클래스
│   │   ├── Block_Rocket.cs           # 로켓 블록
│   │   ├── Block_Boomerang.cs        # 부메랑 블록
│   │   ├── Block_TNT.cs              # TNT 블록
│   │   ├── Slot.cs                   # 헥사곤 슬롯 시스템
│   │   ├── SlotGenerator.cs          # 슬롯 생성기
│   │   ├── PuzzleCreator.cs          # 퍼즐 생성 관리자
│   │   ├── PuzzleBreaker.cs          # 블록 제거 로직
│   │   ├── PuzzleSearch.cs           # 퍼즐 검색 및 매칭
│   │   ├── BlockMover.cs             # 블록 이동 애니메이션
│   │   ├── BlockPooling.cs           # 블록 오브젝트 풀링
│   │   ├── ExtraPooling.cs           # 추가 오브젝트 풀링
│   │   ├── MouseInteraction.cs       # 사용자 입력 처리
│   │   ├── ScreenUI.cs               # UI 관리
│   │   ├── ScoreText.cs              # 점수 표시 텍스트
│   │   └── CustomColor.cs            # 색상 관리
│   ├── Sprites/                      # 게임 스프라이트
│   ├── Prefabs/                      # 프리팹 리소스
│   └── Resources/                    # 게임 리소스
└── ProjectSettings/
```

## 주요 클래스 설명

### Core 클래스
- **Block**: 모든 블록의 기본 클래스. 색상, 이동, 파괴 기능 제공
- **Slot**: 헥사곤 격자의 각 칸을 나타내며, 6방향 이웃 관리 및 블록 교환 기능

### Manager 클래스
- **PuzzleCreator**: 게임 시작 시 퍼즐 생성 및 블록 추가 담당
- **PuzzleBreaker**: 매칭된 블록 탐색 및 제거, 점수 계산
- **PuzzleSearch**: 모든 슬롯 탐색 및 매칭 검색
- **BlockMover**: 블록 이동 애니메이션 및 낙하 효과

### Pooling 시스템
- **BlockPooling**: 게임 블록(Gem, Obstacle, 특수 블록)의 재사용 관리
- **ExtraPooling**: ScoreText 등 추가 UI 요소의 풀링 관리

## 기술 스택

- **Engine**: Unity 2021.x (2D)
- **Language**: C#
- **Platform**: PC, Android 지원
- **Packages**:
  - TextMeshPro
  - Unity 2D Animation
  - Unity 2D Sprite

## 개발 환경 설정
- Unity 2021.x 이상

## 게임 플레이 방법

1. **블록 교환**: 인접한 두 블록을 드래그하여 위치 교환
2. **매칭**: 같은 색의 블록 3개 이상을 연결하여 제거
3. **특수 블록 활용**: 4개 이상 매칭 시 생성되는 특수 블록으로 전략적 플레이
4. **장애물 제거**: 장애물은 2번 타격하여 제거 (보너스 점수 획득)
5. **목표 달성**: 제한된 이동 횟수 내에 모든 장애물 제거

## 주요 게임 로직

### 매칭 알고리즘
1. **클러스터 검색**: 시계방향으로 인접 블록 탐색하여 2개 이상의 연속된 같은 색 블록 찾기
2. **라인 검색**: 3방향(상-하, 좌상-우하, 우상-좌하)으로 일직선 매칭 검색
3. **연쇄 처리**: 블록 제거 후 빈 공간 채우기 → 자동 매칭 재검색

### 블록 이동
- 블록 제거 시 위쪽 블록들이 중력에 의해 자동 낙하
- 각 세로 라인별로 독립적으로 시그널 전송 및 이동 처리
- 부드러운 애니메이션으로 이동 표현

## 최근 업데이트

- 부메랑 특수 블록 추가 (50% 구현)
- 장애물 스폰 시스템 개선
- UI 개선 및 추가
- 드롭다운 로직 수정
- 기타 로직 최적화

## 라이선스

이 프로젝트는 학습 및 포트폴리오 목적으로 제작되었습니다.

## 문의

프로젝트에 대한 문의사항이나 버그 리포트는 Issues 탭을 이용해주세요.
